function Calendar(a,b){this._container=a;this._caller=b;this._year,this._month,this._date};Calendar.prototype.getWeekday=function(b,c,e){a=Math.floor((14-c)/12);y=e-a;m=c+12*a-2;d=(b+y+Math.floor(y/4)-Math.floor(y/100)+Math.floor(y/400)+Math.floor((31*m)/12))%7;return d};Calendar.prototype.runNian=function(){if((this._year%400==0)||((this._year%4==0)&&(this._year%100!=0)))return true;else return false};Calendar.prototype.nextMonth=function(){if(this._month==12){this._year=this._year+1;this._month=1}else{this._month=this._month+1}this.showCalendar()};Calendar.prototype.prevMonth=function(){if(this._month==1){this._year=this._year-1;this._month=12}else{this._month=this._month-1}this.showCalendar()};Calendar.prototype.prevYear=function(){this._year=this._year-1;this.showCalendar()};Calendar.prototype.nextYear=function(){this._year=this._year+1;this.showCalendar()};Calendar.prototype.changeDate=function(d){this._date=d;this._caller.callback()};Calendar.prototype.showCalendar=function(){var a=YAHOO.util.Dom;var b=YAHOO.util.Event;var c="";var d;var e=new Date();var f=this.getWeekday(1,this._month,this._year);switch(this._month){case 1:d=31;break;case 2:if(this.runNian())d=29;else d=28;break;case 3:d=31;break;case 4:d=30;break;case 5:d=31;break;case 6:d=30;break;case 7:d=31;break;case 8:d=31;break;case 9:d=30;break;case 10:d=31;break;case 11:d=30;break;case 12:d=31;break}c+="<Table cellpadding=0 cellspacing=0 border=0  width=100% align=center valign=top>";c+="<tr><td style='font-size:12px;color:#333333;font-family:arial' align=center height=25><b><span id='Calendar_PrevYear' style='cursor:pointer;color:#517c97' title='去年'>&lt;&lt;</span>&nbsp;&nbsp;<span id='Calendar_PrevMonth' style='cursor:pointer;color:#517c97' title='上个月'>&lt; &nbsp;</span><span id='Calendar_Year'>"+this._year+"</span>"+"年"+"<span id='Calendar_Month'>"+this._month+"</span>"+"月<span id='Calendar_NextMonth' style='cursor:pointer;color:#517c97' title='下个月'>&nbsp;&nbsp;&gt;</span>&nbsp;&nbsp;<span id='Calendar_NextYear' style='cursor:pointer;color:#517c97' title='明年'>&gt;&gt;</span></b></td></tr>";c+="</table>";c+="<table align=center frame=hsides cellpadding=0 cellspacing=0 border=1 style='border-collapse:collapse;font-size:11px;font-family:arial;font-weight:bold' bordercolor=#c3cfcb width=100%>";c+="<Tr align=center bgcolor=#E8F3FF style='color:#517c97;font-size:12px;'> ";c+="<td height=20>日</td>";c+="<td>一</td>";c+="<td>二</td>";c+="<td>三</td>";c+="<td>四</td>";c+="<td>五</td>";c+="<td>六</td>";c+="</Tr><tr height=18>";var g=0;var h="#FFFFFF",fontColor="#333333";for(i=0;i<f;i++)c+="<Td align=center bgcolor=#ffffff>&nbsp;</Td>";for(i=1;i<=d;i++){if((this._year==e.getFullYear())&&(this._month==e.getMonth()+1)){if(i==e.getDate())h="#c8f7e6";else h="#FFFFFF"}if(i==this._date)fontColor="#FD3402";else fontColor="#333333";c+="<td align=center id=td_"+i;c+=" onclick=\"calendar.changeDate('"+i+"');\" style='color:"+fontColor+";cursor:pointer'  bgcolor="+h+" onmouseover=\"this.style.backgroundColor='#C0FBAA'\" onmouseout=\"this.style.backgroundColor=''\">"+i+"</td>";f=(f+1)%7;if((f==0)&&(i!=d)){c+="</tr><tr height=18>";g++}}if(f!=0){for(i=f;i<7;i++)c+="<td align=center bgcolor=#ffffff>&nbsp;</td>";c+="</tr>"}c+="</tr></table>";this._container.innerHTML=c;b.addListener(a.get("Calendar_NextMonth"),"click",this.nextMonth,this,true);b.addListener(a.get("Calendar_PrevMonth"),"click",this.prevMonth,this,true);b.addListener(a.get("Calendar_NextYear"),"click",this.nextYear,this,true);b.addListener(a.get("Calendar_PrevYear"),"click",this.prevYear,this,true)};Calendar.prototype.set=function(a){this._year=a.getFullYear();this._month=a.getMonth()+1;this._date=a.getDate()};Calendar.prototype.get=function(){return this._year+"/"+this._month+"/"+this._date};Calendar.Get=function(a,b){calendar=new Calendar(a,b);return calendar};