var Dom=YAHOO.util.Dom;var Event=YAHOO.util.Event;var container=Dom.get("calendar_container");var active="min";var prevActive="min";var mouseOn=false;var calendarDisplayed=false;function Caller(){};var c=Calendar.Get(container,new Caller());Caller.prototype.callback=function(){active=="min"?Dom.get("minDate").innerHTML=c.get():Dom.get("maxDate").innerHTML=c.get();closeCalendar()};var showCalendar=function(){this.id=="minDate"?active="min":active="max";if(!calendarDisplayed||prevActive!=active){c.set(new Date(this.innerHTML));c.showCalendar();Dom.setStyle(container,"display","block");Dom.setStyle("closer","display","block");if(active=="min"){Dom.setStyle(container,"left","0px");Dom.setStyle("closer","left","191px")}if(active=="max"){Dom.setStyle(container,"left","162px");Dom.setStyle("closer","left","353px")}calendarDisplayed=true}else{closeCalendar()}prevActive=active};var insertTimeSelecter=function(){var a=Dom.get("minTime");var b=Dom.get("maxTime");for(i=0;i<24;i++){var c=document.createElement("option");var d=document.createElement("option");var e=document.createElement("option");var f=document.createElement("option");c.text=c.value=e.text=e.value=i+":00";d.text=d.value=f.text=f.value=i+":30";if(minTimeInit==i+":00")c.selected=true;else if(minTimeInit==i+":30")d.selected=true;if(maxTimeInit==i+":00")e.selected=true;else if(maxTimeInit==i+":30")f.selected=true;a.options[i*2]=c;a.options[i*2+1]=d;b.options[i*2]=e;b.options[i*2+1]=f;Dom.get("minDate").innerHTML=minDateInit;Dom.get("maxDate").innerHTML=maxDateInit}};var format=function(a){return a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate()};var shiftTime=function(){Dom.setStyle("minDate","color","#FD7422");Dom.setStyle("maxDate","color","#FD7422");Dom.setStyle("minTime","color","#FD7422");Dom.setStyle("maxTime","color","#FD7422");var a=new Date(Dom.get("minDate").innerHTML);var b=new Date(Dom.get("maxDate").innerHTML);var c=this.id;var d=1;if(c=="prev")d=-1;var v=Dom.get("changer").value;switch(v){case"1d":case"7d":a.setDate(a.getDate()+d*parseInt(v));b.setDate(b.getDate()+d*parseInt(v));Dom.get("minDate").innerHTML=format(a);Dom.get("maxDate").innerHTML=format(b);break;case"1m":a.setMonth(a.getMonth()+d);b.setMonth(b.getMonth()+d);Dom.get("minDate").innerHTML=format(a);Dom.get("maxDate").innerHTML=format(b);break}setTimeout(function(){Dom.setStyle("minDate","color","#333333");Dom.setStyle("maxDate","color","#333333");Dom.setStyle("minTime","color","#333333");Dom.setStyle("maxTime","color","#333333")},500)};var closeCalendar=function(){Dom.setStyle(container,"display","none");Dom.setStyle("closer","display","none");calendarDisplayed=false};var setMinDate=function(a){Dom.get("minDate").innerHTML=a};var setMaxDate=function(a){Dom.get("maxDate").innerHTML=a};var setMinTime=function(a){var l=Dom.get("minTime").options.length;for(var i=0;i<l;i++){if(Dom.get("minTime").options[i].value==a){Dom.get("minTime").options[i].selected=true;return}}};var setMaxTime=function(a){var l=Dom.get("maxTime").options.length;for(var i=0;i<l;i++){if(Dom.get("maxTime").options[i].value==a){Dom.get("maxTime").options[i].selected=true;return}}};insertTimeSelecter();Event.addListener(Dom.get("minDate"),"click",showCalendar);Event.addListener(Dom.get("maxDate"),"click",showCalendar);Event.addListener(Dom.get("prev"),"click",shiftTime);Event.addListener(Dom.get("next"),"click",shiftTime);Event.addListener(Dom.get("closer"),"click",closeCalendar);